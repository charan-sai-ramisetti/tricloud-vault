<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Forgot Password | TriCloud Vault</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Auth styles -->
  <link rel="stylesheet" href="../css/auth.css" />
</head>

<body class="bg-light">

<!-- ===============================
     NAVBAR
================================ -->
<nav class="navbar bg-white border-bottom px-3">
  <div class="container-fluid">
    <span class="navbar-brand fw-semibold">TriCloud Vault</span>

    <div class="d-flex gap-3">
      <a href="login.html" class="fw-medium text-decoration-none">Login</a>
      <a href="register.html" class="text-muted text-decoration-none">Register</a>
    </div>
  </div>
</nav>

<!-- ===============================
     FORGOT PASSWORD CARD
================================ -->
<main
  class="container d-flex align-items-center justify-content-center"
  style="min-height: calc(100vh - 64px);"
>
  <div class="row w-100 justify-content-center">
    <div class="col-12 col-sm-10 col-md-6 col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body p-4">

          <h4 class="fw-semibold text-center mb-3">Forgot Password</h4>

          <p class="text-muted text-center mb-4" style="font-size: 14px;">
            Enter your registered email.  
            If an account exists, weâ€™ll send a reset link.
          </p>

          <div class="mb-3">
            <input
              type="email"
              id="email"
              class="form-control"
              placeholder="Email"
              required
            />
          </div>

          <button class="btn btn-primary w-100" onclick="sendResetLink()">
            Send Reset Link
          </button>

          <p
            id="forgot-msg"
            class="text-center mt-3"
            style="display:none;"
          ></p>

          <p class="text-center text-muted mt-3 mb-0">
            Remembered your password?
            <a href="login.html" class="fw-medium text-decoration-none">
              Login
            </a>
          </p>

        </div>
      </div>
    </div>
  </div>
</main>

<!-- ===============================
     JS
================================ -->
<script src="../js/config.js"></script>

<script>
function sendResetLink() {
  const emailInput = document.getElementById("email");
  const msg = document.getElementById("forgot-msg");

  const email = emailInput.value.trim();

  if (!email) {
    showMsg("Email is required", "text-danger");
    return;
  }

  fetch(`${API_BASE_URL}/auth/forgot-password/`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ email })
  })
    .then(() => {
      // Always show success (security best practice)
      showMsg(
        "If the email exists, a reset link has been sent.",
        "text-success"
      );
    })
    .catch(() => {
      showMsg("Something went wrong. Please try again.", "text-danger");
    });

  function showMsg(text, cls) {
    msg.style.display = "block";
    msg.className = `text-center mt-3 ${cls}`;
    msg.innerText = text;
  }
}
</script>

</body>
</html>
